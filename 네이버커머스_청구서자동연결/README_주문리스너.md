# ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ ì‹¤ì‹œê°„ ì£¼ë¬¸ ë¦¬ìŠ¤ë„ˆ ì‚¬ìš© ê°€ì´ë“œ

## íŒŒì¼ êµ¬ì„±

```
ë„¤ì´ë²„ì»¤ë¨¸ìŠ¤_ì²­êµ¬ì„œìë™ì—°ê²°/
â”œâ”€â”€ config.py             â† API í‚¤ ë° í”„ë¡ì‹œ ì„¤ì • (â˜… ì—¬ê¸°ì— KEY ì…ë ¥)
â”œâ”€â”€ order_listener.py     â† ì‹¤ì‹œê°„ ì£¼ë¬¸ ë¦¬ìŠ¤ë„ˆ ë©”ì¸
â”œâ”€â”€ requirements.txt      â† í•„ìš” íŒ¨í‚¤ì§€ ëª©ë¡
â””â”€â”€ order_logs/           â† ê°ì§€ëœ ì£¼ë¬¸ ìë™ ì €ì¥ í´ë” (ìë™ ìƒì„±)
```

---

## 1ë‹¨ê³„: íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

---

## 2ë‹¨ê³„: API í‚¤ ì…ë ¥

`config.py` ë¥¼ ì—´ì–´ ì•„ë˜ ë‘ ì¤„ì„ ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´:

```python
CLIENT_ID     = "YOUR_CLIENT_ID"      # ë„¤ì´ë²„ ì»¤ë¨¸ìŠ¤ API ì•± ID
CLIENT_SECRET = "YOUR_CLIENT_SECRET"  # ì•± ì‹œí¬ë¦¿ (bcrypt salt)
```

> **ë„¤ì´ë²„ ì»¤ë¨¸ìŠ¤ API í‚¤ ë°œê¸‰ ê²½ë¡œ:**  
> [ë„¤ì´ë²„ ì»¤ë¨¸ìŠ¤ íŒŒíŠ¸ë„ˆ ì„¼í„°](https://partner.naver.com) â†’ API ê´€ë¦¬ â†’ ì•± ë“±ë¡

---

## 3ë‹¨ê³„: ì‹¤í–‰

```bash
cd ë„¤ì´ë²„ì»¤ë¨¸ìŠ¤_ì²­êµ¬ì„œìë™ì—°ê²°
python order_listener.py
```

---

## ë™ì‘ ë°©ì‹

```
[ì‹œì‘] ìµœê·¼ 10ë¶„ ì£¼ë¬¸ â†’ seen ëª©ë¡ ë“±ë¡ (ê¸°ì¡´ ì£¼ë¬¸ ë¬´ì‹œ)
  â†“
[ë§¤ 30ì´ˆ] ìµœê·¼ 1ë¶„ êµ¬ê°„ ì¡°íšŒ
  â†“
seen ì— ì—†ëŠ” ìƒˆ productOrderId ë°œê²¬
  â†“
/query API ë¡œ ìƒì„¸ ì¡°íšŒ (ìƒí’ˆëª…, ì˜µì…˜, êµ¬ë§¤ì, ë°°ì†¡ì§€ ë“±)
  â†“
ì½˜ì†” ì¶œë ¥ + order_logs/ ì— JSON ì €ì¥
```

---

## ìƒˆ ì£¼ë¬¸ ì¶œë ¥ ì˜ˆì‹œ

```
============================================================
  ğŸ›’  ìƒˆ ì£¼ë¬¸ ê°ì§€! (2025-03-15 14:32:05)
============================================================
  ìƒí’ˆì£¼ë¬¸ë²ˆí˜¸  : 2025031512345678
  ê²°ì œì™„ë£Œì‹œê°  : 2025-03-15T14:31:55+09:00
  êµ¬ë§¤ìëª…      : í™ê¸¸ë™
  ì£¼ë¬¸ ìƒí’ˆ     : í•˜ì´ë™ ì² ì œì„ ë°˜ 60x108x200 4ë‹¨ 270kg
  ì„ íƒ ì˜µì…˜     : ë©”íŠ¸ê·¸ë ˆì´ / 4ë‹¨
  ì£¼ë¬¸ ìˆ˜ëŸ‰     : 1ê°œ
  ìµœì¢… ê¸ˆì•¡     : 119,000ì›
  ìˆ˜ì·¨ì¸        : í™ê¸¸ë™ / 010-1234-5678
  ë°°ì†¡ì§€        : ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123 456í˜¸
============================================================
```

---

## í´ë§ ì£¼ê¸° ë³€ê²½

`config.py` ì—ì„œ ì¡°ì •:

```python
POLL_INTERVAL_SECONDS = 30   # ê¸°ë³¸ 30ì´ˆ, ë” ë¹ ë¥´ê²Œ í•˜ë ¤ë©´ ì¤„ì¼ ê²ƒ
```

> âš ï¸ ë„ˆë¬´ ì§§ê²Œ ì„¤ì • ì‹œ API Rate Limit ì´ˆê³¼ ê°€ëŠ¥. ìµœì†Œ 10ì´ˆ ê¶Œì¥.

---

## ê²¬ì ì„œ/ì²­êµ¬ì„œ ìë™í™” ì—°ê²° (í–¥í›„ ì‘ì—…)

`order_listener.py` í•˜ë‹¨ì˜ `on_new_order_hook()` í•¨ìˆ˜ì—ì„œ  
ìƒˆ ì£¼ë¬¸ ìˆ˜ì‹  ì‹œ ìë™ìœ¼ë¡œ í˜¸ì¶œë˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤:

```python
def on_new_order_hook(order: dict):
    # ì˜ˆ: ê²¬ì ì„œ ìë™ ìƒì„±
    create_estimate_document(order)
    # ì˜ˆ: ì²­êµ¬ì„œ ìë™ ìƒì„±
    create_invoice_document(order)
```
