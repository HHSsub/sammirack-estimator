# FAX 문서 작업 이력 (크리티컬)

## 작업 시점별 이력

---

### 작업 시점 1: FAX 메모 줄바꿈 문제 해결
**작업 내용:**
- FAX 전송 시 메모 칸의 여러 줄 텍스트가 한 줄로 표시되고 글자가 잘리는 문제 해결
- `src/utils/faxUtils.js`에서 `.estimate-memo` 스타일에 `white-space: pre-wrap`, `word-wrap: break-word` 추가

**이상 현상:**
- 메모 내용이 길어도 한 줄로만 표시되어 글자가 잘림
- FAX 미리보기 창에서 잘린 상태로 표시됨

**실수 원인:**
- html2canvas가 textarea의 스크롤 영역을 캡처하지 못함
- textarea가 고정 높이로 설정되어 있어 스크롤된 내용이 캡처되지 않음

**개선 작업:**
- FAX 캡처 전에 textarea를 div로 임시 변환하는 로직 추가
- textarea의 value와 모든 스타일을 복사한 div 생성
- `white-space: pre-wrap`으로 줄바꿈 유지
- 캡처 후 div를 제거하고 textarea 복원

---

### 작업 시점 2: 소재지 주소 한 줄 표시 및 공간 확장
**작업 내용:**
- 소재지 주소가 두 줄로 나뉘는 문제 해결
- `white-space: nowrap` 적용 및 공간 확장

**이상 현상:**
- 소재지 주소가 "경기도 광명시 원노온사로 39, 철제 스틸하우스" / "1" 이렇게 두 줄로 나뉨
- 마지막 글자 "1"이 테이블 바깥으로 빠져나감

**실수 원인:**
- `min-width: 250px` 설정으로 인해 테이블이 A4 영역을 벗어남
- `overflow: visible`만 설정하여 내용이 잘리지 않도록 했지만, 테이블 자체가 A4를 벗어남

**개선 작업:**
- `min-width` 제거
- 좌측 정보 칼럼 너비를 `max-width: 150px`로 제한하여 우측 공간 확보
- `white-space: nowrap` 유지

---

### 작업 시점 3: A4 영역 벗어남 문제 (반복 실수)
**작업 내용:**
- 상단 테이블이 A4를 벗어나지 않도록 수정
- 좌우 패딩 조정

**이상 현상:**
- 상단 테이블이 A4를 뚫고 바깥으로 나감
- 소재지 주소의 마지막 글자가 테이블 바깥으로 빠져나감

**실수 원인:**
- `min-width: 250px` 설정 (작업 시점 2에서 이미 발생)
- `width: calc(100% - 4px)` 설정으로 인한 레이아웃 문제
- `padding: 2mm 0mm 4mm`로 좌우 패딩 제거하여 테이블이 직접 공간 사용 시 A4 벗어남

**개선 작업:**
- `width: 100%`로 변경 (A4 영역 내 보장)
- `padding: 2mm 2mm 4mm`로 좌우 패딩 동일하게 설정
- `overflow: hidden` 추가하여 A4 벗어남 방지

---

### 작업 시점 4: 좌우 균형 문제
**작업 내용:**
- FAX 문서가 좌측으로 쏠리는 문제 해결
- 좌우 여백 균형 맞추기

**이상 현상:**
- 문서가 좌측으로 쏠려있고 우측 여백만 많음
- 좌측은 여백 없이 꽉 차있고 우측만 여백이 많음

**실수 원인:**
- `transform-origin: top center`만으로는 부족
- 패딩과 마진 설정이 불균형
- 테이블 너비 설정이 적절하지 않음

**개선 작업:**
- `margin: 0 auto` 추가 (중앙 정렬)
- `padding: 2mm 2mm 4mm` (좌우 패딩 동일)
- `box-sizing: border-box` 적용

---

### 작업 시점 5: 소재지 주소 잘림 문제 (반복 실수)
**작업 내용:**
- 소재지 주소의 마지막 글자 "1"이 테이블 바깥으로 빠져나가는 문제 해결

**이상 현상:**
- 소재지 주소 마지막 글자 "1"이 테이블 바깥으로 빠져나감
- 문서 전체가 A4를 벗어남

**실수 원인:**
- `overflow: visible` 설정으로 인해 내용이 테이블을 벗어남
- `table-layout: auto`로 인한 칼럼 너비 자동 조정 문제
- 칼럼 너비 제한이 없어서 테이블이 A4를 벗어남

**개선 작업:**
- `table-layout: fixed`로 변경 (고정 레이아웃)
- 좌측 정보 칼럼: `width: 25%`
- 우측 라벨 칼럼: `width: 20%`
- 우측 정보 칼럼(소재지): `width: 30%`, `white-space: nowrap`
- `overflow: hidden`, `text-overflow: ellipsis` 적용 (A4 벗어남 방지)

---

### 작업 시점 6: 중복 스타일 제거
**작업 내용:**
- 중복된 `.info-table` 스타일 정리

**이상 현상:**
- 같은 스타일이 여러 번 정의되어 충돌 가능성

**실수 원인:**
- 여러 번 수정하면서 중복 스타일이 생성됨

**개선 작업:**
- 중복된 `.info-table` 스타일 제거
- 하나의 통합된 스타일로 정리

---

## 반복 실수 패턴

1. **A4 영역 벗어남**: `min-width`, `width: calc(100% - 4px)` 등으로 인한 문제가 여러 번 발생
2. **소재지 주소 잘림**: `overflow: visible`과 `white-space: nowrap` 조합 시 A4 벗어남 문제 반복
3. **좌우 균형**: 패딩과 마진 설정을 여러 번 수정해야 함

## 핵심 교훈

1. **A4 영역 보장이 최우선**: 모든 스타일 변경 시 A4 영역을 벗어나지 않는지 먼저 확인
2. **고정 레이아웃 사용**: `table-layout: fixed`로 칼럼 너비를 명확히 제어
3. **퍼센트 기반 너비**: 픽셀 단위 대신 퍼센트로 칼럼 너비 설정
4. **overflow 처리**: `overflow: visible` 사용 시 반드시 A4 영역 내에 머물도록 확인
5. **작업 전 확인**: 이전 작업 이력을 확인하여 같은 실수를 반복하지 않기

## 현재 최종 상태

- 컨테이너: `width: 100%`, `padding: 2mm 2mm 4mm`, `margin: 0 auto`, `overflow: hidden`
- info-table: `table-layout: fixed`, `width: 100%`
- 좌측 정보 칼럼: `width: 25%`
- 우측 라벨 칼럼: `width: 20%`
- 우측 정보 칼럼: `width: 30%`, `white-space: nowrap`, `overflow: hidden`, `text-overflow: ellipsis`

